# 01. Data Class (POJO)

repo: https://github.com/eljay0921/toy-projects/tree/main/java-kotlin-project

- java-kotlin-project/app/src/main/java/example/java/Person.java
- java-kotlin-project/app/src/main/java/example/kotlin/Person.kt

---

## 기본 비교 (v1)

### Java

```java
package example.java;

import java.util.Objects;

public class Person {
    private String name;
    private int age;
    private String email;

    public Person() {}

    public Person(String name, int age, String email) {
        this.name = name;
        this.age = age;
        this.email = email;
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public int getAge() {
        return age;
    }

    public void setAge(int age) {
        this.age = age;
    }

    public String getEmail() {
        return email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    @Override
    public int hashCode() {
        return Objects.hash(name, age, email);
    }

    @Override
    public boolean equals(Object obj) {
        if (this == obj) return true;
        if (obj == null || getClass() != obj.getClass()) return false;
        Person person = (Person) obj;
        return age == person.age &&
                Objects.equals(name, person.name) &&
                Objects.equals(email, person.email);
    }

    @Override
    public String toString() {
        return "Person{" +
                "name='" + name + '\'' +
                ", age=" + age +
                ", email='" + email + '\'' +
                '}';
    }
}
```

### Kotlin

```kotlin
package example.kotlin

data class Person (
    val name: String,
    val age: Int,
    val email: String,
)
```

### 비교

- **data class** 키워드로 자동 생성: `toString()`, `equals()`, `hashCode()`, `copy()`, `componentN()`
- **Primary constructor**에서 프로퍼티 선언과 초기화를 동시에
- **val/var**로 불변/가변 프로퍼티 구분
- **getter/setter 자동 생성** (커스터마이징 가능)

---

## 추가 비교 (v2)

-> 생성자가 여러 개인 경우

### Java

```java
package example.java.dataclass;

public class User {
    private String username;
    private String email;
    private int age;
    private boolean isActive;


    // 기본 생성자
    public User() {
        this.isActive = true; // 기본값
    }

    // username만 받는 생성자
    public User(String username) {
        this();
        this.username = username;
    }

    // username, email 받는 생성자
    public User(String username, String email) {
        this(username);
        this.email = email;
    }

    // 전체 필드 생성자
    public User(String username, String email, int age, boolean isActive) {
        this.username = username;
        this.email = email;
        this.age = age;
        this.isActive = isActive;
    }

    public String getUsername() {
        return username;
    }

    public void setUsername(String username) {
        this.username = username;
    }

    // getter, setter 생략 ...
}

```

### Kotlin

```kotlin
package example.kotlin.dataclass

data class User(
    val username: String,
    val email: String = "",
    val age: Int = 0,
    val isActive: Boolean = true
) {
    // Secondary constructor (필요한 경우)
    constructor(username: String) : this(username, "")
}

// 또는 더 간단하게 기본값만 활용
//data class User(
//    val username: String,
//    val email: String = "",
//    val age: Int = 0,
//    val isActive: Boolean = true
//)
```

### 비교

- **기본 매개변수(Default Parameters)** 사용으로 여러 생성자 불필요
- **Named Arguments**로 가독성 향상: `User(username = "john", age = 25)`

---

## 추가 비교 (v3)

-> 커스텀 getter/setter가 있는 경우

### Java

```java
package example.java.dataclass;

public class Rectangle {
    private double width;
    private double height;

    public Rectangle(double width, double height) {
        this.width = width;
        this.height = height;
    }

    public double getWidth() {
        return width;
    }

    public void setWidth(double width) {
        if (width < 0) {
            throw new IllegalArgumentException("Wrong width!");
        }
        this.width = width;
    }

    public double getHeight() {
        return height;
    }

    public void setHeight(double height) {
        if (height < 0) {
            throw new IllegalArgumentException("Wrong height!");
        }
        this.height = height;
    }

    public double getArea() {
        return width * height;
    }
}
```

### Kotlin

```kotlin
package example.kotlin.dataclass

class Rectangle(width: Double, height: Double) {
    var width: Double = width
        set(value) {
            require(value > 0) { "Wrong width" }
            field = value
        }

    var height: Double = height
        set(value) {
            require(value > 0) { "Wrong height" }
            field = value
        }

    val area: Double
        get() = width * height
}
```

### 비교

- **Custom setter**: `set(value)` 블록으로 검증 로직 추가
- **Computed properties**: getter만 정의하여 계산된 값 반환
- **require()** 함수로 간단한 검증

---

## 추가 비교 (v4)

-> 불변 객체

```java
package example.java.dataclass;

import java.util.ArrayList;
import java.util.List;

public final class ImmutablePerson {
    private final String name;
    private final int age;
    private final List<String> hobbies;

    public ImmutablePerson(String name, int age, List<String> hobbies) {
        this.name = name;
        this.age = age;
        // 방어적 복사
        this.hobbies = new ArrayList<>(hobbies);
    }

    public String getName() {
        return name;
    }

    public int getAge() {
        return age;
    }

    public List<String> getHobbies() {
        return new ArrayList<>(hobbies);
    }

    public ImmutablePerson withAge(int newAge) {
        return new ImmutablePerson(this.name, newAge, new ArrayList<>(hobbies));
    }
}
```

### Kotlin

```kotlin
package example.kotlin.dataclass

data class ImmutablePerson (
    val name: String,
    val age: Int,
    val hobbies: List<String>
) {
    // copy() 메서드 자동 생성됨
    fun withAge(newAge: Int) = copy(age = newAge)
}
```

### 비교

- **val**로 불변 프로퍼티 자동 보장
- **copy()** 메서드 자동 생성으로 수정된 객체 생성 간편
- **List**는 기본적으로 읽기 전용 (Kotlin의 Collection 설계)